import{j as e,r as u,a as B,g as Y,d as O,f as U,o as D,c as V}from"./client-DayaVDz4.js";import{B as _,W as y,a as P,b as X,c as J,A as T,U as K,d as q,e as z,f as I,H as Q,g as Z,h as ee}from"./Header-Dt3TlnKQ.js";function te({wheelAngle:n}){return e.jsxs("div",{id:"mainContainer",children:[e.jsx("img",{id:"mainImage",src:"./shared-assets/images/Wheel.png",style:{rotate:`${n}deg`}}),e.jsx("img",{id:"arrowImage",src:"./shared-assets/images/WheelArrow.png"}),e.jsx("div",{id:"mainBlur"})]})}function ne({spinInfo:n,setSpinInfo:s,isDisabled:t}){function i(l){const a=parseFloat(l.target.value);a>.5?s(g=>({...g,bet:a})):s(g=>({...g,bet:.5})),l.target.value=""}return e.jsxs("div",{className:"sideSection",children:[e.jsx("h2",{children:"Bet"}),e.jsx("div",{className:"sideSectionFlexContainer",children:_.map((l,a)=>e.jsx(se,{bet:l,isActive:n.bet==l,isDisabled:t,setSpinInfo:s},`keyBet${a}`))}),e.jsx("input",{className:!_.includes(n.bet)&&n.bet!=0?"active":null,type:"number",disabled:t,placeholder:`Your bet - ${n.bet} $`,onBlur:i})]})}function se({bet:n,isActive:s,isDisabled:t,setSpinInfo:i}){return e.jsxs("button",{className:s?"betButton active":"betButton",onClick:()=>i(l=>({...l,bet:n})),disabled:t||s,children:[n," $"]})}function re({spinInfo:n,setSpinInfo:s,isDisabled:t,colorValues:i,koafValues:l}){return e.jsxs("div",{className:"sideSection",children:[e.jsx("h2",{children:"Color"}),e.jsx("div",{className:"sideSectionFlexContainer",children:i.map((a,g)=>e.jsx(oe,{color:a,koaf:l[a],isActive:n.color==a,isDisabled:t,setSpinInfo:s},`keyColor${g}`))})]})}function oe({color:n,koaf:s,isActive:t,isDisabled:i,setSpinInfo:l}){return e.jsx("button",{id:`button${n}`,className:t?"colorButton active":"colorButton",onClick:()=>l(a=>({...a,color:n})),disabled:i||t,children:`${n} x${s}`})}function ie({historyArray:n}){const s=u.useRef();function t(){return n.length==0?e.jsx("h6",{style:{width:"100%",height:"100%",lineHeight:"40px",textAlign:"center",color:"gray"},children:"It seems there is nothing..."}):n.map((h,f)=>e.jsx("div",{className:`historyElement ${h}`},`keyHistory${f}`))}let i=0,l=!1;const a=h=>{l=!0,s.current.classList.add("dragging"),i=h.screenX};function g(h){if(l){const f=h.screenX-i;s.current.scrollLeft-=f}i=h.screenX}const C=()=>{l=!1,s.current.classList.remove("dragging")};return e.jsx("div",{className:"sideSection",id:"historySection",children:e.jsx("div",{autoFocus:"true",ref:s,className:"sideSectionFlexContainer",id:"historyFlexContainer",onDragStart:h=>h.preventDefault(),onMouseDown:a,onMouseMove:g,onMouseUp:C,onMouseLeave:C,children:t()})})}function le({page:n,balance:s,spinInfo:t,koafValues:i,isDisabled:l,StartEvent:a}){function g(){return t.bet!=0&&t.color!=""?`Possible win - ${t.bet*i[t.color]} $`:"Choose bet and color"}return e.jsx("div",{id:"spinSection",children:e.jsxs("button",{id:"spinButton",className:n,disabled:l||t.bet>s||t.bet==0||t.color=="",onClick:a,children:["Spin ",t.bet," $",e.jsx("h2",{children:g()})]})})}function ae({balance:n,spinInfo:s,setSpinInfo:t,isDisabled:i,StartEvent:l,historyArray:a}){return e.jsxs("div",{className:"sideContainer",children:[e.jsx(ne,{spinInfo:s,setSpinInfo:t,isDisabled:i}),e.jsx(re,{spinInfo:s,setSpinInfo:t,isDisabled:i,colorValues:P,koafValues:y}),e.jsx(ie,{historyArray:a}),e.jsx(le,{page:"Wheel",balance:n,spinInfo:s,koafValues:y,isDisabled:i,StartEvent:l})]})}function ce(){return e.jsxs("div",{id:"resultContainer",children:[e.jsx("h1",{id:"resultColor"}),e.jsx("h2",{id:"resultProfit"})]})}function de({balance:n,setBalance:s,spinInfo:t,setSpinInfo:i,isDisabled:l,setIsDisabled:a,historyArray:g,setHistoryArray:C,setLastGamesArray:h,setStatistics:f}){const[j,w]=u.useState(0),[b,W]=u.useState(!1),A=u.useRef(0),x=u.useRef(0);u.useEffect(()=>{b&&(k(),W(!1))},[b]);function H(){A.current=Math.random()<.5?1:-1,x.current=4+Math.random()*6,a(!0),s(r=>r-t.bet),M("start"),$()}function $(){w(r=>(r+x.current*A.current)%360),x.current>3?x.current-=Math.random()*.025:x.current>2?x.current-=Math.random()*.02:x.current>1?x.current-=Math.random()*.015:x.current>.5?x.current-=Math.random()*.01:x.current-=Math.random()*.004,x.current<=0?(w(r=>r>=0?r:r+360),x.current=0,A.current=0,W(!0)):setTimeout($,10)}function k(){console.log(`Final angle is ${j}`);const r=N(),c=t.color==r,d=c?"5C9E5E":"9E5C5C",m=c?t.bet*(y[t.color]-1):t.bet;c&&s(o=>o+m+t.bet),p(d,r,c,m),F(d,t.color,r,t.bet,c?t.bet*y[t.color]:0),M("finish",c,r,t.bet*y[t.color]),a(!1)}function N(){let r,c=1/0;for(let L=0;L<=360;L+=9){const R=Math.abs(j-L);R<c&&(c=R,r=L%360)}r-=225,r<0&&(r+=360),console.log(`Nearest degree is ${r}`);let d;const m=0,o=[45,180,225],E=[9,27,63,81,99,117,135,153,171,189,207,243,261,279,297,315,333,351],S=[18,36,54,72,90,108,126,144,162,198,216,234,252,270,288,306,324,342];return r==m?d="Green":o.includes(r)?d="Yellow":E.includes(r)?d="Black":S.includes(r)&&(d="Red"),console.log(`Final color is ${d}`),d}function p(r,c,d,m){const o=document.getElementById("resultContainer"),E=document.getElementById("resultColor"),S=document.getElementById("resultProfit");o.style.display="flex",o.style.background=`radial-gradient(#${r} 5%, #${r}77)`,E.textContent=`${c} x${y[c]}`,S.textContent=d?`+ ${m} $`:`- ${m} $`,setTimeout(()=>o.style.display="none",5e3)}function F(r,c,d,m,o){C(E=>{const S=[d,...E];return S.length>X&&S.pop(),S}),h(E=>{const S=[{bgColor:r,userColor:c,finalColor:d,betBefore:m,betAfter:o},...E];return S.length>J&&S.pop(),S})}function M(r,c,d,m){r=="start"?f(o=>({...o,totalSpins:o.totalSpins+1,totalMoneyBet:o.totalMoneyBet+t.bet,redChoosed:o.redChoosed+(t.color=="Red"?1:0),blackChoosed:o.blackChoosed+(t.color=="Black"?1:0),yellowChoosed:o.yellowChoosed+(t.color=="Yellow"?1:0),greenChoosed:o.greenChoosed+(t.color=="Green"?1:0)})):r=="finish"&&f(o=>({...o,totalWins:o.totalWins+(c?1:0),totalMoneyWon:o.totalMoneyWon+(c?m:0),winPercentage:Math.round((o.totalWins+(c?1:0))/o.totalSpins*1e3)/10,moneyProfit:o.totalMoneyWon+(c?m:0)-o.totalMoneyBet,redWon:o.redWon+(c&&d=="Red"?1:0),blackWon:o.blackWon+(c&&d=="Black"?1:0),yellowWon:o.yellowWon+(c&&d=="Yellow"?1:0),greenWon:o.greenWon+(c&&d=="Green"?1:0)}))}return e.jsxs("div",{className:"mainGameWindow",style:{background:"linear-gradient(to right, #4C9AFF, #9137BB)"},children:[e.jsx(te,{wheelAngle:j}),e.jsx(ae,{balance:n,spinInfo:t,setSpinInfo:i,isDisabled:l,StartEvent:H,historyArray:g}),e.jsx(ce,{})]})}function ue({lastGamesArray:n}){function s(){return n.length==0?e.jsx("h6",{style:{position:"absolute",width:"100%",height:"100px",textAlign:"center",lineHeight:"100px",color:"gray"},children:"It seems there is nothing..."}):n.map((t,i)=>e.jsxs("div",{className:"lastGameCard",style:{background:`#${t.bgColor}`},children:[e.jsxs("div",{children:[e.jsxs("h6",{style:{width:"100%",height:"40px",textAlign:"center",lineHeight:"40px"},children:[t.betBefore," $"]}),e.jsx("div",{className:"lastGameCardColorInfo",style:{background:`#${T[t.userColor]}`}})]}),e.jsx("img",{src:"./shared-assets/images/ArrowSign.png",style:{height:"40px"}}),e.jsxs("div",{children:[e.jsxs("h5",{style:{width:"100%",height:"40px",textAlign:"center",lineHeight:"40px"},children:[t.betAfter," $"]}),e.jsx("div",{className:"lastGameCardColorInfo",style:{background:`#${T[t.finalColor]}`}})]})]},`keyLastGame${i}`))}return e.jsxs("section",{id:"lastGamesSection",children:[e.jsx("h1",{children:"Last games"}),e.jsx("div",{id:"lastGamesContainer",children:s()})]})}function he({statistics:n,statisticsTexts:s,statisticsChars:t}){function i(){return Object.values(n).map((l,a)=>e.jsxs("div",{className:"statisticsBlock",children:[e.jsx("h5",{children:s[a]}),e.jsxs("h5",{children:[l," ",t[a]]})]},`keyStatistics${a}`))}return e.jsxs("div",{id:"statisticsSection",children:[e.jsx("h1",{children:"Statistics"}),e.jsx("div",{id:"statisticsContainer",children:i()})]})}function ge(){const n=u.useRef(!1),[s,t]=u.useState(window.sessionStorage.getItem("balance"));u.useEffect(()=>{B.currentUser&&n.current&&K(s)},[s]);async function i(){const A=await Y(O(U,"users",B.currentUser.uid));t(A.data().balance),n.current=!0}B.currentUser&&!n.current&&i();const[l,a]=u.useState({bet:0,color:""}),[g,C]=u.useState(!1),[h,f]=u.useState(q);u.useEffect(()=>{window.localStorage.setItem("WHEEL_HISTORY_ARRAY",JSON.stringify(h))},[h]);const[j,w]=u.useState(z);u.useEffect(()=>{window.localStorage.setItem("WHEEL_LAST_GAMES_ARRAY",JSON.stringify(j))},[j]);const[b,W]=u.useState(I);return u.useEffect(()=>{window.localStorage.setItem("WHEEL_STATISTICS",JSON.stringify(b))},[b]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{page:"Wheel",balance:s}),e.jsxs("main",{children:[e.jsx(de,{balance:s,setBalance:t,spinInfo:l,setSpinInfo:a,isDisabled:g,setIsDisabled:C,historyArray:h,setHistoryArray:f,setLastGamesArray:w,setStatistics:W}),e.jsx(ue,{lastGamesArray:j}),e.jsx(he,{statistics:b,statisticsTexts:ee,statisticsChars:Z})]})]})}const v=document.getElementById("root");let G;D(B,n=>{n?.emailVerified?console.log(`Signed in with uid ${n.uid}`):console.log("No signed in user"),v.childElementCount==0&&(G=V.createRoot(v)),G.render(e.jsx(u.StrictMode,{children:e.jsx(ge,{})}))});
