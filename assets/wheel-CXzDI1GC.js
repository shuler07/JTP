import{r as d,j as e,o as p,c as v,a as N}from"./firebase-s2V9xmUb.js";import{K as W,W as Y,a as k,B,C as O,A as M,b as F,c as P,u as U,d as D,e as V,f as I,H as J}from"./Header-Bmev_6PM.js";function K({balance:n,setBalance:r,spinInfo:t,isDisabled:c,setIsDisabled:i,setWheelHistoryArray:u,setWheelLastGamesArray:x,setWheelStatistics:b}){const[g,C]=d.useState(0),[j,E]=d.useState(!1),y=d.useRef(0),h=d.useRef(0);d.useEffect(()=>{j&&($(),E(!1))},[j]);function _(){y.current=Math.random()<.5?1:-1,h.current=4+Math.random()*6,i(!0),r(o=>o-t.bet),L("start"),A()}function A(){C(o=>(o+h.current*y.current)%360),h.current>3?h.current-=Math.random()*.025:h.current>2?h.current-=Math.random()*.02:h.current>1?h.current-=Math.random()*.015:h.current>.5?h.current-=Math.random()*.01:h.current-=Math.random()*.004,h.current<=0?(C(o=>o>=0?o:o+360),h.current=0,y.current=0,E(!0)):setTimeout(A,10)}function $(){console.log(`Final angle is ${g}`);const o=H(),s=t.color==o,a=s?"5C9E5E":"9E5C5C",w=s?t.bet*(W[t.color]-1):t.bet;s&&r(l=>l+w+t.bet),T(a,o,s,w),G(a,t.color,o,t.bet,s?t.bet*W[t.color]:0),L("finish",s,o,t.bet*W[t.color]),i(!1)}function H(){let o,s=1/0;for(let f=0;f<=360;f+=9){const R=Math.abs(g-f);R<s&&(s=R,o=f%360)}o-=180,o<0&&(o+=360),console.log(`Nearest degree is ${o}`);let a;const w=0,l=[45,180,225],S=[9,27,63,81,99,117,135,153,171,189,207,243,261,279,297,315,333,351],m=[18,36,54,72,90,108,126,144,162,198,216,234,252,270,288,306,324,342];return o==w?a="Green":l.includes(o)?a="Yellow":S.includes(o)?a="Black":m.includes(o)&&(a="Red"),console.log(`Final color is ${a}`),a}function T(o,s,a,w){const l=document.getElementById("wheelMainWindowResult"),S=document.getElementById("wheelMainWindowResultColor"),m=document.getElementById("wheelMainWindowResultProfit");l.style.display="flex",l.style.background=`linear-gradient(#${o} 5%, #${o}77)`,S.textContent=`${s} x${W[s]}`,m.textContent=a?`+ ${w} $`:`- ${w} $`,setTimeout(()=>l.style.display="none",5e3)}function G(o,s,a,w,l){u(S=>{const m=[a,...S];return m.length>Y&&m.pop(),m}),x(S=>{const m=[{bgColor:o,userColor:s,finalColor:a,betBefore:w,betAfter:l},...S];return m.length>k&&m.pop(),m})}function L(o,s,a,w){o=="start"?b(l=>({...l,totalSpins:l.totalSpins+1,totalMoneyBet:l.totalMoneyBet+t.bet,redChoosed:l.redChoosed+(t.color=="Red"?1:0),blackChoosed:l.blackChoosed+(t.color=="Black"?1:0),yellowChoosed:l.yellowChoosed+(t.color=="Yellow"?1:0),greenChoosed:l.greenChoosed+(t.color=="Green"?1:0)})):o=="finish"&&b(l=>({...l,totalWins:l.totalWins+(s?1:0),totalMoneyWon:l.totalMoneyWon+(s?w:0),winPercentage:Math.round((l.totalWins+(s?1:0))/l.totalSpins*1e3)/10,moneyProfit:l.totalMoneyWon+(s?w:0)-l.totalMoneyBet,redWon:l.redWon+(s&&a=="Red"?1:0),blackWon:l.blackWon+(s&&a=="Black"?1:0),yellowWon:l.yellowWon+(s&&a=="Yellow"?1:0),greenWon:l.greenWon+(s&&a=="Green"?1:0)}))}return e.jsxs("div",{id:"wheelMainWindow",children:[e.jsx("img",{id:"wheelMainWindowImage",src:"./shared-assets/images/Wheel.png",style:{rotate:`${g}deg`}}),e.jsx("img",{id:"wheelMainWindowArrow",src:"./shared-assets/images/WheelArrow.png"}),e.jsx("div",{id:"wheelMainWindowBlur"}),e.jsxs("button",{id:"wheelMainWindowSpin",disabled:c||t.bet>n||t.bet==0,onClick:_,children:["Spin ",t.bet," $"]}),e.jsxs("div",{id:"wheelMainWindowResult",children:[e.jsx("h1",{id:"wheelMainWindowResultColor"}),e.jsx("h2",{id:"wheelMainWindowResultProfit"})]})]})}function X({spinInfo:n,setSpinInfo:r,isDisabled:t}){function c(){return n.bet!=0&&n.color!=""?`Possible win - ${n.bet*W[n.color]} $`:"Choose bet and color"}return e.jsxs("div",{id:"wheelBetWindow",children:[e.jsx("h2",{children:"Bet"}),e.jsx("div",{className:"wheelBetContainer",children:B.map((i,u)=>e.jsx(q,{bet:i,isActive:n.bet==i,isDisabled:t,setSpinInfo:r},`betButton${u}`))}),e.jsx("input",{id:"wheelBetCustom",className:!B.includes(n.bet)&&n.bet!=0?"active":null,type:"number",disabled:t,placeholder:`Your bet - ${n.bet} $`,onBlur:i=>{const u=parseFloat(i.target.value);u>.5?r(x=>({...x,bet:u})):r(x=>({...x,bet:.5})),i.target.value=""}}),e.jsx("h2",{children:"Color"}),e.jsx("div",{className:"wheelBetContainer",children:O.map((i,u)=>e.jsx(z,{color:i,koaf:W[i],isActive:n.color==i,isDisabled:t,setSpinInfo:r},`colorButton${u}`))}),e.jsx("h2",{children:c()})]})}function q({bet:n,isActive:r,isDisabled:t,setSpinInfo:c}){return e.jsxs("button",{className:r?"betButton active":"betButton",onClick:()=>c(i=>({...i,bet:n})),disabled:t||r,children:[n," $"]})}function z({color:n,koaf:r,isActive:t,isDisabled:c,setSpinInfo:i}){const u=`button${n}`;return e.jsx("button",{id:u,className:t?"colorButton active":"colorButton",onClick:()=>i(x=>({...x,color:n})),disabled:c||t,children:`${n} x${r}`})}function Q({wheelHistoryArray:n}){function r(){return n.length==0?e.jsx("h6",{style:{position:"absolute",width:"calc(100% - 40px)",height:"110px",lineHeight:"110px",textAlign:"center",color:"gray"},children:"Spin wheel to see games history"}):n.map((t,c)=>e.jsx("div",{className:`wheelHistoryElement ${t}`},c))}return e.jsxs("div",{id:"wheelHistoryWindow",children:[e.jsx("h2",{children:"History"}),e.jsx("div",{id:"wheelHistoryContainer",children:r()})]})}function Z({wheelLastGamesArray:n}){function r(){return n.length==0?e.jsx("h6",{style:{position:"absolute",width:"100%",height:"100px",textAlign:"center",lineHeight:"100px",color:"gray"},children:"Spin wheel to see your last games"}):n.map((t,c)=>e.jsxs("div",{className:"wheelLastGameCard",style:{background:`#${t.bgColor}`},children:[e.jsxs("div",{className:"wheelLastGameCardInfoContainer",children:[e.jsxs("h6",{style:{width:"100%",height:"40px",textAlign:"center",lineHeight:"40px"},children:[t.betBefore," $"]}),e.jsx("div",{className:"wheelLastGameCardColorInfo",style:{background:`#${M[t.userColor]}`}})]}),e.jsx("img",{className:"wheelLastGameCardInfoContainer",src:"shared-assets/images/ArrowSign.png",style:{height:"40px"}}),e.jsxs("div",{className:"wheelLastGameCardInfoContainer",children:[e.jsxs("h5",{style:{width:"100%",height:"40px",textAlign:"center",lineHeight:"40px"},children:[t.betAfter," $"]}),e.jsx("div",{className:"wheelLastGameCardColorInfo",style:{background:`#${M[t.finalColor]}`}})]})]},c))}return e.jsxs("section",{id:"wheelLastGamesSection",children:[e.jsx("h1",{children:"Last games"}),e.jsx("div",{id:"wheelLastGamesContainer",children:r()})]})}function ee({wheelStatistics:n}){function r(){return Object.values(n).map((t,c)=>e.jsxs("div",{className:"wheelStatisticsBlock",children:[e.jsx("h5",{children:F[c]}),e.jsxs("h5",{children:[t," ",P[c]]})]},`statistics${c}`))}return e.jsxs("div",{id:"wheelStatisticsSection",children:[e.jsx("h1",{children:"Statistics"}),e.jsx("div",{id:"wheelStatisticsContainer",children:r()})]})}function te(){const[n,r]=d.useState(U);d.useEffect(()=>{window.localStorage.setItem("balance",n)},[n]);const[t,c]=d.useState({bet:0,color:""}),[i,u]=d.useState(!1),[x,b]=d.useState(D);d.useEffect(()=>{window.localStorage.setItem("WHEEL_HISTORY_ARRAY",JSON.stringify(x))},[x]);const[g,C]=d.useState(V);d.useEffect(()=>{window.localStorage.setItem("WHEEL_LAST_GAMES_ARRAY",JSON.stringify(g))},[g]);const[j,E]=d.useState(I);return d.useEffect(()=>{window.localStorage.setItem("WHEEL_STATISTICS",JSON.stringify(j))},[j]),e.jsxs(e.Fragment,{children:[e.jsx(J,{page:"Wheel",balance:n}),e.jsxs("main",{children:[e.jsxs("section",{id:"wheelSection",children:[e.jsx(K,{balance:n,setBalance:r,spinInfo:t,isDisabled:i,setIsDisabled:u,setWheelHistoryArray:b,setWheelLastGamesArray:C,setWheelStatistics:E}),e.jsxs("div",{id:"wheelSideWindows",children:[e.jsx(X,{spinInfo:t,setSpinInfo:c,isDisabled:i}),e.jsx(Q,{wheelHistoryArray:x})]})]}),e.jsx(Z,{wheelLastGamesArray:g}),e.jsx(ee,{wheelStatistics:j})]})]})}p(N,n=>{console.log(n?`Signed in with uid ${n.uid}`:"No signed in user"),v.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(te,{})}))});
